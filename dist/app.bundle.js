!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=332)}({332:function(t,e,n){"use strict";function o(t){return t/100+" Euros"}function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,l=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw l}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){i=!0,a=t},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,a=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e);var s,m=function t(e,n,o){u(this,t),this.productid=e,this.productcolor=n,this.productqty=o},f=function t(e,n,o,r,a){u(this,t),this.firstname=e,this.lastname=n,this.address=o,this.city=r,this.email=a};"Orinoco - Sélection"==document.getElementsByTagName("title")[0].innerHTML&&fetch("https://orinoco-be-e25hrjcoqq-ew.a.run.app/api/teddies/").then((function(t){return t.json()})).then((function(t){var e=document.getElementById("result");for(var n in console.log(t),t)e.innerHTML+="<article class='col-md-6 col-lg-4 p-3'>\n                <img src='".concat(t[n].imageUrl,"' alt='").concat(t[n]._id,"' width=50% />\n                <h3><a id='").concat(t[n].name,"' href='/views/customize.html?id=").concat(t[n]._id,"'>").concat(t[n].name,"</a></h3>\n                <h5>").concat(o(t[n].price),"</h5>\n            </article>"),console.log(document.getElementById(t[n].name));var r=function(e){document.getElementById(t[e].name).onclick=function(){localStorage.setItem("selectedProductId",t[e]._id),location.href="'/views/customize.html?id=".concat(t[e]._id,"'")}};for(var a in t)r(a)})).catch((function(t){console.log("Quelque chose s'est mal passé durant le GET pour constituer la liste des produits !",t)})),"Orinoco - Produit"==document.getElementsByTagName("title")[0].innerHTML&&(s=new URL(document.location).searchParams.get("id"),fetch("https://orinoco-be-e25hrjcoqq-ew.a.run.app/api/teddies/"+s).then((function(t){return t.json()})).then((function(t){document.getElementById("teddyPicture").innerHTML+='<img class="img-fluid" src=\''.concat(t.imageUrl,"' alt='").concat(t._id,"' width='100%'>"),document.getElementById("teddyTitle").innerText+="Et voici... ".concat(t.name),document.getElementById("teddyStory").innerText+="Mon histoire : ".concat(t.description),document.getElementById("teddyPrice").innerText+="Prix unitaire : ".concat(o(t.price));var e=document.getElementById("teddyColor");for(var n in t.colors){var r=document.createElement("option");e.appendChild(r),r.setAttribute("value",t.colors[n]),r.innerHTML+=t.colors[n]}e.addEventListener("change",(function(t){document.getElementById("logTeddyColor").textContent="Coloris ".concat(t.target.value," retenu."),localStorage.setItem("selectedProductColor","".concat(t.target.value))}));for(var a=document.getElementById("teddyQty"),l=1;l<31;l++){var c=document.createElement("option");a.appendChild(c),c.setAttribute("value",l),c.innerHTML+=l}a.addEventListener("change",(function(t){document.getElementById("logTeddyQty").textContent="".concat(t.target.value," exemplaire(s) retenu(s)."),localStorage.setItem("selectedProductQty","".concat(t.target.value))})),localStorage.setItem("selectedProductColor",e.firstElementChild.getAttribute("value")),localStorage.setItem("selectedProductQty",a.firstElementChild.getAttribute("value"))})).catch((function(t){console.log("Quelque chose s'est mal passé durant le GET pour fournir le détail du produit selectionné !",t)})),document.getElementById("toAddInBasket").addEventListener("click",(function(t){t.preventDefault();var e=new m(localStorage.getItem("selectedProductId"),localStorage.getItem("selectedProductColor"),localStorage.getItem("selectedProductQty")),n=JSON.parse(localStorage.getItem("basketStored"))||[];if("[]"!=JSON.stringify(n)){var o=null;for(var r in n)n[r].productid===e.productid&&n[r].productcolor===e.productcolor?(n[r].productqty=parseInt(n[r].productqty)+parseInt(e.productqty),o=!0):null===o&&n[r].productid===e.productid&&n[r].productcolor!=e.productcolor&&(o=!1);o||n.push(e),localStorage.setItem("basketStored",JSON.stringify(n))}else n.push(e),localStorage.setItem("basketStored",JSON.stringify(n));alert("Votre peluche est dans le panier !")})),document.getElementById("toOrder").addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),localStorage.removeItem("selectedProductId"),localStorage.removeItem("selectedProductColor"),localStorage.removeItem("selectedProductQty"),location.href="/views/order.html"}))),"Orinoco - Panier"==document.getElementsByTagName("title")[0].innerHTML&&(!function(){var t,e=JSON.parse(localStorage.getItem("basketStored")),n=0,a=0,l=0,c=r(e);try{var i=function(){var c=t.value,i="https://orinoco-be-e25hrjcoqq-ew.a.run.app/api/teddies/"+c.productid;fetch(i).then((function(t){return t.json()})).then((function(t){(n=parseInt(t.price)*c.productqty,document.getElementById("orderResult").innerHTML+="<tr class='product'>\n                <td>(<a class='btnToDeleteAProduct' data-id='".concat(t._id,"' data-color='").concat(c.productcolor,"' href='../views/order.html'>Supprimer</a>)</td>\n                <td>").concat(t._id,"</td>\n                <td><img src='").concat(t.imageUrl,"' width='50%'/></td>\n                <td><a class='NameOfTeddy' data-id='").concat(t._id,"' data-name='").concat(t.name,"' data-color='").concat(c.productcolor,"' href='../views/customize.html'>").concat(t.name,"</a></td>\n                <td>").concat(c.productcolor,"</td>\n                <td>").concat(c.productqty,"</td>\n                <td>").concat(o(t.price),"</td>\n                <td>").concat(o(n),"</td>\n            </tr>"),a+=n,localStorage.setItem("totalAmountStored",a),++l===e.length)&&(document.getElementById("totalAmountArea").innerHTML+="<h2>Montant total : "+o(localStorage.getItem("totalAmountStored"))+"</h2>");var i,d=r(document.getElementsByClassName("NameOfTeddy"));try{var u=function(){var t=i.value;t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),localStorage.setItem("selectedProductId",t.dataset.id),location.href="/views/customize.html"}))};for(d.s();!(i=d.n()).done;)u()}catch(t){d.e(t)}finally{d.f()}var s,m=r(document.getElementsByClassName("btnToDeleteAProduct"));try{var f=function(){var t=s.value;t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var n,o=[],a=r(JSON.parse(localStorage.getItem("basketStored")));try{for(a.s();!(n=a.n()).done;){var l=n.value;l.productid==t.dataset.id&&l.productcolor==t.dataset.color||o.push(l)}}catch(t){a.e(t)}finally{a.f()}localStorage.setItem("basketStored",JSON.stringify(o)),location.href="/views/order.html"}))};for(m.s();!(s=m.n()).done;)f()}catch(t){m.e(t)}finally{m.f()}})).catch((function(t){console.log("Quelque chose s'est mal passé durant le GET !",t)}))};for(c.s();!(t=c.n()).done;)i()}catch(t){c.e(t)}finally{c.f()}}(),function(){var t=document.getElementsByClassName("fullName"),e=document.getElementById("email"),n=document.getElementById("address"),o=document.getElementById("city"),r=document.getElementById("logEmail"),a=document.getElementById("logFirstName"),c=document.getElementById("logLastName"),i=document.getElementById("logAddress"),d=document.getElementById("logCity");e.addEventListener("input",(function(t){var e=t.target.value;r.textContent=e,/\S+@\S+\.\S+/gi.test(e)||(r.textContent="invalide :'(")}));var u,s=l(t);try{var m=function(){var t=u.value;t.addEventListener("input",(function(e){var n=e.target.value;"firstName"==t.name&&(a.textContent=n,f(n)||(a.textContent="invalide :'(")),"lastName"==t.name&&(c.textContent=n,f(n)||(c.textContent="invalide :'("))}))};for(s.s();!(u=s.n()).done;)m()}catch(t){s.e(t)}finally{s.f()}function f(t){return/^[\w][\D][^²&"#\(\)\[\|\]^@°\{\}\+\=\/.*µ¤$£€%§!:;,?¨\^]{0,128}$/gi.test(t)}n.addEventListener("input",(function(t){var e=t.target.value;i.textContent=e,/(^[0-9]{0,3})([\s\-][a-z]{3,6})*\s([a-z]{3,10})\s([a-z0-9\-\s\'][^²&"#\(\)\[\|\]^@°\{\}\+\=\/.*µ¤$£€%§!:;,?¨\^]{0,128})/gi.test(e)||(i.textContent="invalide :'(")})),o.addEventListener("input",(function(t){var e=t.target.value;d.textContent=e,/^[\w][\D][^²&"#\(\)\[\|\]^@°\{\}\+\=\/.*µ¤$£€%§!:;,?¨\^]{0,128}$/gi.test(e)||(d.textContent="invalide :'("),"invalide :'("==d.textContent||"invalide :'("==i.textContent||"invalide :'("==c.textContent||"invalide :'("==a.textContent||"invalide :'("==r.textContent?document.getElementById("toValidateOrder").disabled=!0:document.getElementById("toValidateOrder").disabled=!1}))}(),document.getElementById("toValidateOrder").addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),localStorage.setItem("firstName",document.getElementById("firstName").value),localStorage.setItem("lastName",document.getElementById("lastName").value),localStorage.setItem("address",document.getElementById("address").value),localStorage.setItem("city",document.getElementById("city").value),localStorage.setItem("email",document.getElementById("email").value);var e,n=new f(localStorage.getItem("firstName"),localStorage.getItem("lastName"),localStorage.getItem("address"),localStorage.getItem("city"),localStorage.getItem("email")),o=[],r=i(JSON.parse(localStorage.getItem("basketStored")));try{for(r.s();!(e=r.n()).done;){var a=e.value;o.push(a.productid)}}catch(t){r.e(t)}finally{r.f()}fetch("https://orinoco-be-e25hrjcoqq-ew.a.run.app/api/teddies/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contact:{firstName:n.firstname,lastName:n.lastname,address:n.address,city:n.city,email:n.email},products:o})}).then((function(t){return console.log(t.status+":"+t.statusText),t.json()})).then((function(t){console.log(t),console.log(t.orderId),localStorage.setItem("orderId",t.orderId),location.href="/views/thanks.html"})).catch((function(t){console.log("Quelque chose s'est mal passé durant le POST de la commande !",t)}))}))),"Orinoco - Commande enregistrée. Merci !"==document.getElementsByTagName("title")[0].innerHTML&&(document.getElementById("thanksResult").innerHTML+='<p>Votre commande d\'un montant de <h5 class="mt-3 mb-4">'.concat(o(localStorage.getItem("totalAmountStored")),'</h5> est enregistrée sous la référence <h5 class="mt-3 mb-4">').concat(localStorage.getItem("orderId"),".</h5></p>"),localStorage.removeItem("orderId"),localStorage.removeItem("basketStored"),localStorage.removeItem("totalAmountStored"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),localStorage.removeItem("address"),localStorage.removeItem("city"),localStorage.removeItem("email"))}});